using System;
using System.Collections.Generic;
using System.IO;

namespace test_add_list_from_read_file
{
    class Program
    {
        class user
        {
            public string Name
            { get; set; }
            public string ID
            { get; set; }
            public string IP
            { get; set; }
        }

        List<user> userM = new List<user>();

        // loadingUserData로 서버 로딩시, 파일에 저장된 유저 데이터를 읽어서
        // userM리스트에 데이터를 아래와 같이 저장
        // userM리스트를 다시 Dictionary에 키 값(id)와 묶어서
        // 유저가 보내는 데이터(id, ip)를 읽고
        // 유저의 id를 읽어서 userM데이터의 IP를 갱신
        // 해당 유저 정보로 프로그램 작동.
        private void loadingUserData()
        {
            string[] userText = File.ReadAllLines(@"../../userData.txt");

            int i = 0; int j = 0;
            foreach (string usData in userText)
            {
                if (i == 0)
                { userM.Add(new user()); }
                switch (i)
                {
                    case 0:
                        userM[j].ID = usData;
                        break;
                    case 1:
                        userM[j].Name = usData;
                        break;
                    case 2:
                        userM[j].IP = usData;
                        break;
                }
                i++;
                if (i == 3)
                { j++; i = 0; }
            }
        }

        private void printUserData()
        {
            for(int i = 0; i < userM.Count; i++)
            {
                Console.WriteLine($"{userM[i].ID} : {userM[i].IP} : {userM[i].Name}");
            }
        }
        static void Main()
        {
            Program pro = new Program();
            pro.loadingUserData();
            pro.printUserData();
        }
    }
}
